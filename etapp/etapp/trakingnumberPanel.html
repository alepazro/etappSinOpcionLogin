<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking Number Panel</title>

    <!--    CSS includes -->
    <!-- <link href="Styles/common.css" rel="stylesheet" type="text/css" /> --->
    <link href="themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
    <link href="themes/flick/jquery.ui.all.css" rel="stylesheet" type="text/css" />
    <link href="Styles/app.css" rel="stylesheet" type="text/css" />
    <link href="Styles/logo.css" rel="stylesheet" type="text/css" />
    <link href="Styles/toggleSwitches.css" rel="stylesheet" type="text/css" />
    <link href="vendors/kendo-2013.3.1119/styles/kendo.common.min.css" rel="stylesheet" />
    <link href="vendors/kendo-2013.3.1119/styles/kendo.default.min.css" rel="stylesheet" />
    <!--<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />-->
    <!-----custome files----------->
    <!--<link rel="stylesheet" href="css/bootstrap.min.css">-->
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>
<body>
    <section class="header-easytrack" id="header">
        <div class="container-fluid">
            <div class="row">
                <div class="topstrip" id="topMenu">
                    <nav class="navbar navbar-expand-md navbar-dark" id="toggle">
                        <a href="#"><img src="images/Logo3.png" height="50"></a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="collapsibleNavbar">
                            <ul class="navbar-nav">
                                <li class="nav-item dropdown" id="mod1">
                                    <!--  <a class="nav-link" id="rbtTracking">Tracking</a> -->
                                    <label><input id="rbtTracking" name="panelType" checked="checked" onclick="changePanel(1)" type="radio" style="margin-top:10px;" /><span class="topMenuOption lang" style="font-size:16px;font-weight:bold" key="Tracking">Tracking</span></label>
                                </li>
                                <li class="nav-item" id="mod2">
                                    <!--  <a class="nav-link" id="rbtMultiTracking">Multi-Tracking</a> -->
                                    <label><input id="rbtMultiTracking" name="panelType" onclick="changePanel(2)" type="radio" style="margin-top:10px;" /><span class="topMenuOption lang" style="font-size:16px;font-weight:bold" key="Multi-Tracking">Multi-Tracking</span></label>
                                </li>
                                <li class="nav-item" id="mod3">
                                    <!--  <a class="nav-link" id="rbtReports">Reports</a> -->
                                    <label><input id="rbtReports" name="panelType" onclick="changePanel(3)" type="radio" style="margin-top:10px;" /><span class="topMenuOption lang" style="font-size:16px;font-weight:bold" key="Reports">Reports</span></label>
                                </li>
                                <li class="nav-item" id="mod5">
                                    <!--     <a class="nav-link" id="rbtMaintenance">Maintenance</a> -->
                                    <label><input id="rbtMaintenance" name="panelType" onclick="changePanel(5)" type="radio" style="margin-top:10px;" /><span class="topMenuOption lang" style="font-size:16px;font-weight:bold" key="Maintenance">Maintenance</span></label>
                                </li>
                                <li class="nav-item" id="mod13">
                                    <!-- <a class="nav-link" id="rbtELOG">E-LOG</a> -->
                                    <label><input id="rbtELOG" name="panelType" onclick="changePanel(13)" type="radio" style="margin-top:10px;" /><span class="topMenuOption lang" style="font-size:16px;font-weight:bold" key="E-LOG">E-LOG</span></label>
                                </li>
                                <!--<li class="nav-item" id="mod6">-->
                                <!-- <a class="nav-link" id="rbtELOG">E-LOG</a> -->
                                <!--<label><input id="rbtVideo" name="panelType" onclick="changePanel(14)" type="radio" style="margin-top:10px;" /><span class="topMenuOption lang" style="font-size:16px;font-weight:bold" key="Video">Video</span></label>
    </li>-->
                                <!--<li class="nav-item" id="mod6">-->
                                    <!-- <a class="nav-link" id="rbtELOG">E-LOG</a> -->
                                    <!--<label><input id="rbtFieldService" name="panelType" onclick="changePanel(6)" type="radio" style="margin-top:10px;" /><span class="topMenuOption lang" style="font-size:16px;font-weight:bold" key="FieldService">Field Service</span></label>
                                </li>-->
                                <li class="nav-item" id="mod4">
                                    <!--   <a class="nav-link" id="rbtSettings">Settings</a> -->
                                    <label><input id="rbtSettings" name="panelType" onclick="changePanel(4)" type="radio" style="margin-top:10px;" /><span class="topMenuOption lang" style="font-size:16px;font-weight:bold" key="Settings">Settings</span></label>
                                </li>
                                <li class="nav-item dropdown" id="mod1">
                                    <!--  <a class="nav-link" id="rbtTracking">Tracking</a> -->
                                    <label><input id="rbtVideo" name="panelType" checked="checked" onclick="changePanel(17)" type="radio" style="margin-top:10px;" /><span class="topMenuOption lang" style="font-size:16px;font-weight:bold" key="Video">Video</span></label>
                                </li>
                                <li id="mod6">
                                    <img id="feedback" src="icons/feedback.png" style="width:40px;height:40px;" title="Send Feedback" data-toggle="modal" data-target="#myModal1" />
                                </li>
                                <li class="mobiletext"><a id="trackingFleetLocation" href="#" class="mainMenuOption linkmobilenew lang" onclick="mainMenuClick('fleetLocationDiv',1)" key="FleetLocation">FleetLocation</a></li>
                                <li class="mobiletext"><a id="trackingQuickDispatch" href="#" class="mainMenuOption linkmobilenew lang" onclick="mainMenuClick('dispatchingDiv',1)" key="QuickDispatching">Quick Dispatching</a></li>
                                <li class="mobiletext"><a id="trackingBreadcrumbTrail" href="#" class="mainMenuOption linkmobilenew lang" onclick="mainMenuClick('breadcrumbDiv',1)" key="BreadcrumbTrail">Breadcrumb Trail</a></li>
                                <li class="mobiletext"><a id="trackingFleetStatusBoard" href="fleetStatusBoard.html" class="mainMenuOption linkmobilenew lang" key="FleetStatusBoard">Fleet Status Board</a></li>
                                <li class="mobiletext"><a id="trackingHotSpots" href="hotSpots.html" class="mainMenuOption linkmobilenew lang" key="HotSpots">Hot Spots</a></li>
                                <li class="mobiletext"><a id="trakingnumberpanel" href="trakingnumberPanel.html" class="mainMenuOption linkmobilenew lang" key="trakingnumberPanel">Traking Number</a></li>
                                <li class="mobiletext"><a id="brokerorderpanel" href="brokerorderpanel.html" class="mainMenuOption linkmobilenew lang" key="brokerorderpanel">Broker Order</a></li>
                                <li class="linkmobilenew mobiletext">
                                    <a href="#" onclick="logout()" class="loginDivClass lang" key="Logout">Logout</a>
                                </li>
                                <!-- <li class="linkmobilenew mobiletext">
       <a id="feedback" class="dropdown-item" href="#">
            <span style="font-weight:600;">Feedback</span>
        </a>
    </li>-->

                            </ul>

                        </div>
                        <div class="login-content-right">
                            <ul>
                                <li>
                                    <div id="welcomeTitleDiv">
                                        <span id="welcomeTitleSpan" style="color:white;font:bold"></span>
                                    </div>
                                </li>
                                <li style="color:white;font:bold">
                                    <a href="#" onclick="logout()" class="lang" key="Logout">Logout</a>
                                </li>
                                <!-- <li class="linkmobilenew mobiletext">
                                   <a id="feedback" class="dropdown-item" href="#">
                                        <span style="font-weight:600;">Feedback</span>
                                    </a>
                                </li>-->
                                <li class="cart-icon" id="buyNowDiv">
                                    <a href="#" onclick="buyNow()"><img src="images/cart-header.png"></a>
                                </li>
                                <li>
                                    <select id="language" class="form-control" onchange="selectLanguage(this.value)" style="width:auto">
                                        <option value="-1">Language</option>
                                        <option value="es">ES</option>
                                        <option value="en">EN</option>
                                    </select>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </section>
    <section class="second-strip" id="middleMenu">
        <div class="container-fluid">
            <ul id="mainMenu">
                <!--<li><a id="trackingFleetLocation" href="#" class="mainMenuOption lang" onclick="mainMenuClick('fleetLocationDiv',1)" style="font-size:14px;font-weight:bold" key="FleetLocation">Fleet Location</a></li>
                <li><a id="trackingQuickDispatch" href="#" class="mainMenuOption lang" onclick="mainMenuClick('dispatchingDiv',1)" style="font-size:14px;font-weight:bold" key="QuickDispatching">Quick Dispatching</a></li>
                <li><a id="trackingBreadcrumbTrail" href="#" class="mainMenuOption lang" onclick="mainMenuClick('breadcrumbDiv',1)" style="font-size:14px;font-weight:bold" key="BreadcrumbTrail">Breadcrumb Trail</a></li>-->
                <li><a id="traking" href="tracking.html" class="mainMenuOption lang" style="font-size:14px;font-weight:bold" key="trakingmap">Tracking Map</a></li>
                <li><a id="trackingFleetStatusBoard" href="fleetStatusBoard.html" class="mainMenuOption lang" style="font-size:14px;font-weight:bold" key="FleetStatusBoard">Fleet Status Board</a></li>
                <li><a id="trackingHotSpots" href="hotSpots.html" class="mainMenuOption lang" style="font-size:14px;font-weight:bold" key="HotSpots">Hot Spots</a></li>
                <li><a id="trackingnumber" href="trakingnumberPanel.html" class="mainMenuOption lang" style="font-size:14px;font-weight:bold" key="TrakingNumber">Traking Number</a></li>
                <li id="li_brokerorderpanel"><a id="brokerorderpanel" href="brokerorderpanel.html" class="mainMenuOption lang" style="font-size: 14px; font-weight: bold" key="brokerorderpanel">Broker Order</a></li>
            </ul>
        </div>
    </section>
    <div id="wrapper" class="content-wrap-custome">
        <div id="traking" class="container-fluid">
            <br /><h1>Traking Number Panel</h1><hr />
            <div class="row">
                <div class="col-6">
                    <button type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#formtrakingn">
                        New Traking
                    </button>
                </div>
            </div>
            <div class="row">
                <br />
            </div>
            <div class="row">
                <div class="col-3">
                    <input class="form-control" id="myInput" type="text" placeholder="Search..">
                </div>
            </div>
            <div class="row">
                    <div class="col-12">
                        <div id="tempsensorPost">
                            <div class="row">
                                <!-- Modal post -->
                                <div class="modal fade" id="formtrakingn" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <span>
                                                    Create Traking Number
                                                </span>
                                            </div>
                                            <div class="modal-body">
                                                <form>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <label>Device</label>
                                                        </div>
                                                        <div class="col-6">
                                                            <select id="Device" name="Device" class="form-control">
                                                                <option value="0" selected>Select one</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <label>SendTo</label>
                                                        </div>
                                                        <div class="col-6">
                                                            <input id="SendTo" type="email" class="form-control" placeholder="Emails" required>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <label>ValidUntil</label>
                                                        </div>
                                                        <div class="col-6">
                                                            <input id="ValidUntil" type="datetime-local" class="form-control" placeholder="ValidUntil" required>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <label>Message</label>
                                                        </div>
                                                        <div class="col-6">
                                                            <textarea rows="5" class="form-control" cols="60" id="Message" placeholder="Observations"></textarea>
                                                        </div>
                                                    </div>
                                                    <span id="msg"></span>
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                <button type="button" class="btn btn-primary" onclick="save()">Save changes</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Modal put -->
                                <div class="modal fade" id="formtrakingnput" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <span>
                                                    Edit Traking Number
                                                </span>
                                            </div>
                                            <div class="modal-body">
                                                <form>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <label>Valid Until</label>
                                                        </div>
                                                        <div class="col-6">
                                                            <span id="spanValidUntil"></span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <label>SendTo</label>
                                                        </div>
                                                        <div class="col-6">
                                                            <input id="SendTop" type="email" class="form-control" placeholder="Emails" required>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <label>ValidUntil</label>
                                                        </div>
                                                        <div class="col-6">
                                                            <input id="ValidUntilp" type="datetime-local" class="form-control" placeholder="ValidUntil" required>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <label>Status</label>
                                                        </div>
                                                        <div class="col-6">
                                                            <select id="status" name="status" class="form-control">
                                                                <option value="0">Active</option>
                                                                <option value="1">Finalized</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <label>Message</label>
                                                        </div>
                                                        <div class="col-6">
                                                            <textarea rows="5" class="form-control" cols="60" id="Messagep" placeholder="Observations"></textarea>
                                                        </div>
                                                    </div>

                                                    <!--<span id="msg"></span>-->
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                <button type="button" class="btn btn-primary" onclick="modify()">Save</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <div class="row">
                    <div class="col-12">
                        <div id="trakingnumber">
                            <div class="row">
                                <div class="col-md-12 col-sm-6">
                                    <table class="table table-striped" id="trakingnumber">
                                        <thead>
                                            <tr>
                                                <th scope="col">Edit</th>
                                                <th scope="col">Map</th>
                                                <th scope="col">Device</th>
                                                <th scope="col">TrackingNumber</th>
                                                <th scope="col">SendTo</th>
                                                <th scope="col">ValidUntil</th>
                                                <th scope="col">Message</th>
                                                <!--<th scope="col">Lat</th>
                                                <th scope="col">lng</th>-->
                                                <th scope="col">MapIcon</th>
                                                <th scope="col">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbody_trakingnumber">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

    <script type="text/javascript">var seJY41 = document.createElement("script"); seJY41.type = "text/javascript"; var seJY41s = (location.protocol.indexOf("https") == 0 ? "https" : "http") + "://image.providesupport.com/js/0325vm2g5aj6809q0cspkf44yw/safe-standard.js?ps_h=JY41&ps_t=" + new Date().getTime(); setTimeout("seJY41.src=seJY41s;document.getElementById('sdJY41').appendChild(seJY41)", 1)</script><noscript><div style="display:inline"><a href="http://vm.providesupport.com/0325vm2g5aj6809q0cspkf44yw">Customer Support Chat</a></div></noscript>
    <!-- END ProvideSupport.com Graphics Chat Button Code -->
    <!--    Javascript includes -->
    <script src="Scripts/authorization_006.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/jquery-ui.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.json-2.3.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.tools.min.js" type="text/javascript"></script>
    <script src="Scripts/date.format.js" type="text/javascript"></script>
    <script src="Scripts/db_v002.js" type="text/javascript"></script>
    <script src="Scripts/trakingnumberpanel.js" type="text/javascript"></script>
    <script src="Scripts/utilities_002.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAekGGZACHuofFJ65TxBQFAlYvhw2GjM6U&v=3.17&sensor=false"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/js/toastr.js"></script>

    <!--<script src="Scripts/helpTracking.js" type="text/javascript"></script>-->
    <!--<script src="Scripts/userPreferences.js" type="text/javascript"></script>-->
    <script src="PruebaMultiIdioma/js/script.js" charset="utf-8"></script>
    <script type="text/javascript">
        
        $(document).ready(function () {
            //traductor();
            //loadFeedBackType();
            //getBrand(onBrandSet);
            $("#myInput").on("keyup", function () {
                var value = $(this).val().toLowerCase();
                $("#trakingnumber tr").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });
            

            if (validateToken(false, 'trakingnumberpanel.html') == true) {
                
                setWelcomeTitle();
                getAppFeatures(8);
                loadtrakingNumber();
                getDevicescmb();

            }
        });
        function loadtrakingNumber() {
            
            let status = "";
            try {
                $("#tbody_trakingnumber").empty();
                var row = "";
                var data = getTrakingnumber();
                if (data != null) {
                    $.each(data, function (key, value) {
                        //alert(key + ": " + value.name);
                        //date = new Date(value.LastUpdatedOn).toDateString();;
                        row += "<tr>";
                        /*row += "<td><a href=" + viewCustomer(e) + "class=link - primary>Primary link</a></td>";*/
                        if (value.Flag_Expired)
                        {
                            status = "Finalized";
                            //row += "<td><button type='button' data-toggle='modal' data-target='#formtrakingnput' onclick=edittrakingn() disabled>Edit</button></td>";

                        } else
                        {
                            status = "Active";
                            //row += "<td><button type='button' data-toggle='modal' data-target='#formtrakingnput' onclick=edittrakingn()>Edit</button></td>";

                        }
                        row += "<td><button type='button' data-toggle='modal' data-target='#formtrakingnput' onclick=edittrakingn()>Edit</button></td>";
                        row += "<td><a href=" + value.URLTraking + " target=_blank disabled>View Map</a></td>";
                        row += "<td style=display:none>" + value.ID + "</td>";
                        row += "<td>" + value.Device + "</td>";
                        row += "<td>" + value.TrackingNumber + "</td>";
                        row += "<td>" + value.SendTo + "</td>";
                        row += "<td>" + value.ValidUntil + "</td>";
                        row += "<td>" + value.Message + "</td>";
                        //row += "<td>" + value.Lat + "</td>";
                        //row += "<td>" + value.Lng + "</td>";
                        row += "<td><img src=" + value.MapIcon + " alt=" + value.Device + "></td>";
                        row += "<td>" + status + "</td>";
                        row += "</tr>";

                    });
                    $("#tbody_trakingnumber").append(row)
                }
            }
            catch (err) {
                alert('Error: ' + err.message);
            }
        }        
        function save() {
            var result = savepost();
            
            if (result.isOk == 1) {
                toastr.success('created successfully');
                loadtrakingNumber();
                clearinputs();
            } else {
                toastr.error('error registering');
            }
        }
        function modify() {
            
            var result = saveput();

            if (result.isOk == 1) {
                toastr.success('successful update');
                loadtrakingNumber();
                clearinputs();
            } else {
                toastr.error('error updating');
            }
        }

    </script>
</body>
</html>
